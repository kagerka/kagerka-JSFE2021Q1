(()=>{"use strict";var e={387:(e,t,n)=>{n.r(t)},403:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseComponent=void 0,t.BaseComponent=class{constructor(e="div",t=[]){this.element=document.createElement(e),this.element.classList.add(...t)}}},940:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ERR_404=t.HEX=t.HEX_COLORS=t.CAR_MAKE_LENGTH=t.TWO=t.ONE=t.ZERO=t.PADDING_RIGHT=t.TWO_HUNDRED=t.ONE_HUNDRED=t.MILLISEC_IN_SEC=t.TIME_OUT_3000=t.FIRST_PAGE=t.WINNERS_ON_PAGE=t.CARS_ON_PAGE=void 0,t.CARS_ON_PAGE=7,t.WINNERS_ON_PAGE=10,t.FIRST_PAGE=1,t.TIME_OUT_3000=3e3,t.MILLISEC_IN_SEC=1e3,t.ONE_HUNDRED=100,t.TWO_HUNDRED=200,t.PADDING_RIGHT=40,t.ZERO=0,t.ONE=1,t.TWO=2,t.CAR_MAKE_LENGTH=26,t.HEX_COLORS=16777215,t.HEX=16,t.ERR_404=404},177:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.variables=void 0,t.variables={id:0,animation:{},pageNum:1,winners:[{success:!1,id:0,time:0}],winPageNum:1,winnersCount:"",sort:"time",order:"ASC",arrowWin:"",arrowTime:""}},785:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Garage=void 0;const i=n(403),r=n(73),a=n(243),s=n(914);class o extends i.BaseComponent{constructor(e){super("div",["garage"]),this.rootElement=e,this.rootElement.appendChild(this.element)}render(){return new a.GarageOptions(this.element).render(),new s.Race(this.element).render(),new r.Pagination(this.element).render(),this.element}}t.Garage=o},243:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GarageOptions=void 0;const i=n(403),r=n(845),a=n(767),s=n(214);class o extends i.BaseComponent{constructor(e){super("div",["garage__options"]),this.rootElement=e,this.rootElement.appendChild(this.element),this.createForm=document.createElement("form"),this.createForm.setAttribute("id","create-options"),this.element.appendChild(this.createForm),this.updateForm=document.createElement("form"),this.updateForm.setAttribute("id","update-options"),this.element.appendChild(this.updateForm)}render(){return new r.CreateOption(this.createForm).render(),new s.UpdateOption(this.updateForm).render(),new a.RaceBtnOption(this.element).render(),this.element}}t.GarageOptions=o},845:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,a){function s(e){try{d(i.next(e))}catch(e){a(e)}}function o(e){try{d(i.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}d((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.CreateOption=void 0;const r=n(205),a=n(403),s=n(177),o=n(782),d=n(692);class c extends a.BaseComponent{constructor(e){super("div",["garage__options_wrapper","garage__create"]),this.rootElement=e,this.rootElement.appendChild(this.element),this.nameInput=document.createElement("input"),this.nameInput.setAttribute("type","text"),this.nameInput.setAttribute("name","car-name-create"),this.nameInput.setAttribute("id","car-name-create"),this.nameInput.setAttribute("class","input__text"),this.nameInput.setAttribute("placeholder","Enter car name here"),this.element.appendChild(this.nameInput),this.colorInput=document.createElement("input"),this.colorInput.setAttribute("type","color"),this.colorInput.setAttribute("name","car-color-create"),this.colorInput.setAttribute("id","car-color-create"),this.colorInput.setAttribute("class","input__color"),this.colorInput.setAttribute("value","#e3e3e3"),this.element.appendChild(this.colorInput),this.createBtn=document.createElement("button"),this.createBtn.setAttribute("class","btn garage__create-btn"),this.createBtn.setAttribute("id","create-btn"),this.createBtn.setAttribute("type","button"),this.element.appendChild(this.createBtn),this.init()}init(){let e="",t="";this.element.addEventListener("input",(n=>{n.target===this.nameInput&&(e=this.nameInput.value),n.target===this.colorInput&&(t=this.colorInput.value)})),this.element.addEventListener("click",(n=>i(this,void 0,void 0,(function*(){const i=yield d.generateRandomParam();n.target===this.createBtn&&(e||t?!e&&t?e=`${i.carMake} ${i.carModel}`:e&&!t&&(t=`${i.randomColor}`):(e=`${i.carMake} ${i.carModel}`,t=`${i.randomColor}`),r.createCar(`${e}`,`${t}`),this.nameInput.value="",this.colorInput.value="#e3e3e3",e="",t="",o.generateCarItems(s.variables.pageNum))}))))}render(){return this.createBtn.innerText="Create",this.element}}t.CreateOption=c},692:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.generateRandomParam=void 0;const i=n(161),r=n(940);t.generateRandomParam=()=>{const e=Math.floor(Math.random()*r.CAR_MAKE_LENGTH),t=Object.keys(i.carModels)[e],n=Object.values(i.carModels)[e].length,a=Math.floor(Math.random()*n);return{carMake:t,carModel:Object.values(i.carModels)[e][a],randomColor:`#${Math.floor(Math.random()*r.HEX_COLORS).toString(r.HEX)}`}}},767:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,a){function s(e){try{d(i.next(e))}catch(e){a(e)}}function o(e){try{d(i.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}d((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.RaceBtnOption=void 0;const r=n(205),a=n(403),s=n(940),o=n(177),d=n(782),c=n(560),l=n(692);class u extends a.BaseComponent{constructor(e){super("div",["garage__options_wrapper","garage__race-buttons"]),this.rootElement=e,this.rootElement.appendChild(this.element),this.raceBtn=document.createElement("button"),this.raceBtn.setAttribute("class","btn garage__race-btn"),this.raceBtn.setAttribute("id","race-btn"),this.element.appendChild(this.raceBtn),this.resetBtn=document.createElement("button"),this.resetBtn.setAttribute("class","btn garage__reset-btn"),this.resetBtn.setAttribute("id","reset-btn"),this.element.appendChild(this.resetBtn),this.generateBtn=document.createElement("button"),this.generateBtn.setAttribute("class","btn garage__generate-btn"),this.generateBtn.setAttribute("id","generate-btn"),this.element.appendChild(this.generateBtn),this.init()}render(){return this.raceBtn.innerText="Race",this.resetBtn.innerText="Reset",this.generateBtn.innerText="Generate cars",this.element}init(){let e="",t="";this.element.addEventListener("click",(n=>i(this,void 0,void 0,(function*(){if(n.target===this.generateBtn)for(let i=0;i<s.ONE_HUNDRED;i++){const i=l.generateRandomParam();n.target===this.generateBtn&&(e=`${i.carMake} ${i.carModel}`,t=`${i.randomColor}`,r.createCar(`${e}`,`${t}`),d.generateCarItems(o.variables.pageNum))}n.target===this.raceBtn&&(yield c.raceAll()),n.target===this.resetBtn&&(yield c.resetAll())}))))}}t.RaceBtnOption=u},214:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,a){function s(e){try{d(i.next(e))}catch(e){a(e)}}function o(e){try{d(i.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}d((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.UpdateOption=void 0;const r=n(184),a=n(743),s=n(403),o=n(177),d=n(782),c=n(17);class l extends s.BaseComponent{constructor(e){super("div",["garage__options_wrapper","garage__update"]),this.rootElement=e,this.rootElement.appendChild(this.element),this.nameInput=document.createElement("input"),this.nameInput.setAttribute("type","text"),this.nameInput.setAttribute("name","car-name-update"),this.nameInput.setAttribute("id","car-name-update"),this.nameInput.setAttribute("class","input__text"),this.nameInput.setAttribute("placeholder","Enter new car name here for update"),this.nameInput.setAttribute("disabled","disabled"),this.element.appendChild(this.nameInput),this.colorInput=document.createElement("input"),this.colorInput.setAttribute("type","color"),this.colorInput.setAttribute("name","car-color-update"),this.colorInput.setAttribute("id","car-color-update"),this.colorInput.setAttribute("class","input__color"),this.colorInput.setAttribute("disabled","disabled"),this.colorInput.setAttribute("value","#e3e3e3"),this.element.appendChild(this.colorInput),this.updateBtn=document.createElement("button"),this.updateBtn.setAttribute("class","btn garage__update-btn disabled"),this.updateBtn.setAttribute("id","update-btn"),this.updateBtn.setAttribute("type","button"),this.element.appendChild(this.updateBtn),this.init()}init(){this.element.addEventListener("input",(e=>{e.target!==this.nameInput&&e.target!==this.colorInput||(this.nameInput.value||this.colorInput.value)&&this.updateBtn.classList.remove("disabled")})),this.updateBtn.addEventListener("click",(()=>i(this,void 0,void 0,(function*(){const e=yield r.getCar(c.RaceFieldItem.currentCarId),t=e.name,n=e.color,i=this.colorInput.value;""===this.nameInput.value?yield a.updateCar(c.RaceFieldItem.currentCarId,t,i):"#e3e3e3"===this.colorInput.value?yield a.updateCar(c.RaceFieldItem.currentCarId,this.nameInput.value,n):yield a.updateCar(c.RaceFieldItem.currentCarId,this.nameInput.value,i),d.generateCarItems(o.variables.pageNum),this.nameInput.value="",this.colorInput.value="#e3e3e3",this.updateBtn.classList.add("disabled"),this.nameInput.setAttribute("disabled","disabled"),this.colorInput.setAttribute("disabled","disabled")}))))}render(){return this.updateBtn.innerText="Update",this.element}}t.UpdateOption=l},914:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Race=void 0;const i=n(403),r=n(177),a=n(782);class s extends i.BaseComponent{constructor(e){super("div",["garage__race"]),this.rootElement=e,this.rootElement.appendChild(this.element),this.title=document.createElement("h2"),this.title.setAttribute("class","garage__race-title"),this.element.appendChild(this.title),this.subTitle=document.createElement("h3"),this.subTitle.setAttribute("class","garage__race-subtitle"),this.element.appendChild(this.subTitle),this.raceField=document.createElement("div"),this.raceField.setAttribute("class","garage__race-field"),this.element.appendChild(this.raceField)}render(){return this.title.innerHTML="",this.subTitle.innerHTML="",a.generateCarItems(r.variables.pageNum),this.element}}t.Race=s},634:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Car=void 0;const i=n(403);class r extends i.BaseComponent{constructor(e){super("div",["car","garage__car"]),this.rootElement=e,this.rootElement.appendChild(this.element)}render(e,t){return this.element.setAttribute("id",`car-img-${t}`),this.element.innerHTML=`\n      <svg xmlns="http://www.w3.org/2000/svg" class="car__svg" viewBox="0 0 512 470">\n        <g id="glyph">\n          <path class="car-wheel" \n          d="M120,236a52,52,0,1,0,52,52A52.059,52.059,0,0,0,120,236Zm0,76a24,24,0,1,1,24-24A24,24,0,0,1,120,312Z" />\n          <path class="car-wheel" \n          d="M408,236a52,52,0,1,0,52,52A52.059,52.059,0,0,0,408,236Zm0,76a24,24,0,1,1,24-24A24,24,0,0,1,408,312Z" />\n          <path style="fill: ${e}" id="car" \n          d="M477.4,193.04,384,176l-79.515-65.975A44.109,44.109,0,0,0,276.526,100H159.38a43.785,43.785,0,0,0-34.359,\n          16.514L74.232,176H40A36.04,36.04,0,0,0,4,212v44a44.049,44.049,0,0,0,44,44h9.145a64,64,0,1,1,125.71,\n          0h162.29a64,64,0,1,1,125.71,0H472a36.04,36.04,0,0,0,36-36V228.632A35.791,35.791,0,0,0,477.4,193.04ZM180,\n          164a12,12,0,0,1-12,12H115.245a6,6,0,0,1-4.563-9.9l34.916-40.9A12,12,0,0,1,154.724,121H168a12,12,0,0,1,12,\n          12Zm60,56H224a12,12,0,0,1,0-24h16a12,12,0,0,1,0,24Zm94.479-43.706-114.507-.266a12,12,0,0,1-11.972-12V133a12,\n          12,0,0,1,12-12h57.548a12,12,0,0,1,7.433,2.58l53.228,42A6,6,0,0,1,334.479,176.294Z" />\n        </g>\n      </svg>\n    `,this.element}}t.Car=r},782:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,a){function s(e){try{d(i.next(e))}catch(e){a(e)}}function o(e){try{d(i.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}d((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.generateCarItems=void 0;const r=n(184),a=n(940),s=n(17);t.generateCarItems=e=>{setTimeout((()=>i(void 0,void 0,void 0,(function*(){const t=yield r.getCars(e,a.CARS_ON_PAGE),n=t.items,i=t.count,o=document.querySelector(".garage__race-field"),d=document.querySelector(".garage__race-title"),c=document.querySelector(".garage__race-subtitle");o&&(o.innerHTML="",n.forEach((e=>new s.RaceFieldItem(o).render(e.id,e.name,e.color)))),d&&(d.innerHTML=`Garage (${i})`),c&&(c.innerHTML=`Page #${e}`)}))),a.ZERO)}},17:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,a){function s(e){try{d(i.next(e))}catch(e){a(e)}}function o(e){try{d(i.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}d((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.RaceFieldItem=void 0;const r=n(547),a=n(184),s=n(403),o=n(177),d=n(634),c=n(782),l=n(560);class u extends s.BaseComponent{constructor(e){super("div",["garage__race-item"]),this.rootElement=e,this.rootElement.appendChild(this.element),this.btnWrapper=document.createElement("div"),this.btnWrapper.setAttribute("class","garage__race-item_btn-wrapper"),this.element.appendChild(this.btnWrapper),this.raceButtons=document.createElement("div"),this.raceButtons.setAttribute("class","garage__race-item_buttons"),this.btnWrapper.appendChild(this.raceButtons),this.selectButton=document.createElement("button"),this.selectButton.setAttribute("class","btn garage__race-item_select"),this.raceButtons.appendChild(this.selectButton),this.removeButton=document.createElement("button"),this.removeButton.setAttribute("class","btn garage__race-item_remove"),this.raceButtons.appendChild(this.removeButton),this.raceABButtons=document.createElement("div"),this.raceABButtons.setAttribute("class","garage__race-item_ab"),this.btnWrapper.appendChild(this.raceABButtons),this.aButton=document.createElement("button"),this.aButton.setAttribute("class","btn garage__race-item_a"),this.raceABButtons.appendChild(this.aButton),this.bButton=document.createElement("button"),this.bButton.setAttribute("class","btn garage__race-item_b disabled"),this.raceABButtons.appendChild(this.bButton),this.carName=document.createElement("div"),this.carName.setAttribute("class","garage__race-item_car-name"),this.element.appendChild(this.carName),this.flagImg=document.createElement("img"),this.flagImg.setAttribute("src","./flag.svg"),this.flagImg.setAttribute("alt","flag"),this.flagImg.setAttribute("class","img-flag"),this.element.appendChild(this.flagImg)}init(e){this.raceABButtons.addEventListener("click",(t=>{t.target===this.aButton&&l.startDriving(e),t.target===this.bButton&&l.stopDriving(e)}))}render(e,t,n){return this.selectButton.innerText="Select",this.removeButton.innerText="Remove",this.aButton.innerText="A",this.bButton.innerText="B",this.carName.innerHTML=`${t}`,new d.Car(this.element).render(`${n}`,e),this.selectButton.setAttribute("id",`select-car-${e}`),this.removeButton.setAttribute("id",`remove-car-${e}`),this.aButton.setAttribute("id",`a-button-${e}`),this.bButton.setAttribute("id",`b-button-${e}`),this.flagImg.setAttribute("id",`img-flag-${e}`),this.raceButtons.addEventListener("click",(t=>i(this,void 0,void 0,(function*(){if(t.target===this.removeButton&&((yield a.getCar(e)).id===e?(r.deleteCar(e),c.generateCarItems(o.variables.pageNum)):c.generateCarItems(o.variables.pageNum)),t.target===this.selectButton){const t=yield a.getCar(e),n=document.getElementById("car-name-update"),i=document.getElementById("car-color-update");u.currentCarId=t.id,n&&i&&t.id===e&&(n.removeAttribute("disabled"),i.removeAttribute("disabled"),n.focus())}})))),this.init(e),this.element}}t.RaceFieldItem=u},560:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,a){function s(e){try{d(i.next(e))}catch(e){a(e)}}function o(e){try{d(i.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}d((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.resetAll=t.raceAll=t.stopEngineAll=t.startEngineAll=t.stopDriving=t.startDriving=t.drive=t.stopEngine=t.startEngine=t.animation=t.getDistanceBetweenElements=void 0;const r=n(184),a=n(586),s=n(303),o=n(940),d=n(177),c=n(287),l=n(687);function u(e){const{top:t,left:n,width:i,height:r}=e.getBoundingClientRect();return{x:n+i/o.TWO,y:t+r/o.TWO}}function h(e,t){const n=u(e),i=u(t);return Math.hypot(n.x-i.x,n.y-i.y)}t.getDistanceBetweenElements=h,t.animation=(e,t,n)=>{let i=null;const r={id:-1};return r.id=window.requestAnimationFrame((function a(s){if(i||(i=s),i){const d=s-i,c=Math.round(d*(t/n));e.style.transform=`translateX(${Math.min(c,t-o.PADDING_RIGHT)}px)`,c<t&&(r.id=window.requestAnimationFrame(a))}})),r},t.startEngine=e=>i(void 0,void 0,void 0,(function*(){return(yield fetch(`${a.baseUrl}${a.path.engine}?id=${e}&status=started`)).json()})),t.stopEngine=e=>i(void 0,void 0,void 0,(function*(){return(yield fetch(`${a.baseUrl}${a.path.engine}?id=${e}&status=stopped`)).json()})),t.drive=e=>i(void 0,void 0,void 0,(function*(){const t=yield fetch(`${a.baseUrl}${a.path.engine}?id=${e}&status=drive`).catch();return t.status!==o.TWO_HUNDRED?{success:!1}:Object.assign({},yield t.json())})),t.startDriving=e=>i(void 0,void 0,void 0,(function*(){const n=document.getElementById(`a-button-${e}`),i=document.getElementById(`b-button-${e}`);n instanceof HTMLButtonElement&&i instanceof HTMLButtonElement&&(n.classList.toggle("disabled",!0),i.classList.toggle("disabled",!1));const{velocity:r,distance:a}=yield t.startEngine(e),s=Math.round(a/r),d=document.getElementById(`car-img-${e}`),c=document.getElementById(`img-flag-${e}`);let l,u;d&&c&&(l=Math.floor(h(d,c))+o.ONE_HUNDRED,u=t.animation(d,l,s));const{success:m}=yield t.drive(e);return!m&&u&&window.cancelAnimationFrame(u.id),{success:m,id:e,time:s}})),t.stopDriving=e=>i(void 0,void 0,void 0,(function*(){const n=document.getElementById(`a-button-${e}`),i=document.getElementById(`b-button-${e}`);n instanceof HTMLButtonElement&&i instanceof HTMLButtonElement&&(n.classList.toggle("disabled",!1),i.classList.toggle("disabled",!0));const r=document.getElementById(`car-img-${e}`);yield t.stopEngine(e),window.cancelAnimationFrame(e),r&&(r.style.transform="translateX(0)")})),t.startEngineAll=(e,t)=>i(void 0,void 0,void 0,(function*(){return(yield fetch(`${a.baseUrl}${a.path.engine}?_page=${e}&_limit=${t}&status=started`)).json()})),t.stopEngineAll=(e,t)=>i(void 0,void 0,void 0,(function*(){return(yield fetch(`${a.baseUrl}${a.path.engine}?_page=${e}&_limit=${t}&status=stopped`)).json()}));let m=!1;t.raceAll=()=>i(void 0,void 0,void 0,(function*(){const e=document.getElementById("race-btn"),n=document.getElementById("reset-btn");(yield r.getCars(d.variables.pageNum,o.CARS_ON_PAGE)).items.forEach((e=>i(void 0,void 0,void 0,(function*(){const{id:n}=e,r=yield t.startDriving(n),a=null==r?void 0:r.success,d=null==r?void 0:r.time;if(d){const t=+(d/o.MILLISEC_IN_SEC).toFixed(o.TWO);if(!0===a&&!1===m&&t){m=!0;const r=document.querySelector(".garage__race");r&&new l.WinMsg(r).render(e.name,t),setTimeout((()=>i(void 0,void 0,void 0,(function*(){var e;const t=document.querySelector(".win-message");t&&(null===(e=t.parentNode)||void 0===e||e.removeChild(t))}))),o.TIME_OUT_3000),yield s.saveWinner({id:n,time:t}),setTimeout((()=>{c.Winners.renderWinners()}),o.ZERO)}}})))),e instanceof HTMLButtonElement&&n instanceof HTMLButtonElement&&e.classList.toggle("disabled",!0)})),t.resetAll=()=>i(void 0,void 0,void 0,(function*(){const e=document.getElementById("race-btn"),n=document.getElementById("reset-btn");(yield r.getCars(d.variables.pageNum,o.CARS_ON_PAGE)).items.forEach((e=>{const{id:n}=e;t.stopDriving(n)})),e instanceof HTMLButtonElement&&n instanceof HTMLButtonElement&&e.classList.toggle("disabled",!1),m=!1}))},687:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WinMsg=void 0;const i=n(403);class r extends i.BaseComponent{constructor(e){super("div",["car","win-message"]),this.rootElement=e,this.rootElement.appendChild(this.element),this.winnerMessage=document.createElement("div"),this.winnerMessage.setAttribute("class","win-message_text"),this.element.appendChild(this.winnerMessage)}render(e,t){if(t){const n=t;this.winnerMessage.innerHTML=`${e} finished first (${n} sec)!`}return this.element}clear(){this.element.innerHTML=""}}t.WinMsg=r},295:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Main=void 0;const i=n(403),r=n(785),a=n(287);class s extends i.BaseComponent{constructor(e){super("div",["main"]),this.rootElement=e,this.rootElement.appendChild(this.element),this.logo=document.createElement("img"),this.logo.setAttribute("class","logo"),this.logo.setAttribute("src","./logo.svg"),this.element.appendChild(this.logo)}render(){return new r.Garage(this.element).render(),new a.Winners(this.element).render(),this.element}}t.Main=s},925:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Navigation=void 0;const i=n(403),r=n(287);class a extends i.BaseComponent{constructor(e){super("div",["nav-buttons"]),this.rootElement=e,this.rootElement.appendChild(this.element),this.garageBtn=document.createElement("button"),this.garageBtn.setAttribute("class","btn main-buttons__garage active"),this.element.appendChild(this.garageBtn),this.winnersBtn=document.createElement("button"),this.winnersBtn.setAttribute("class","btn main-buttons__winners"),this.element.appendChild(this.winnersBtn),this.init()}init(){this.element.addEventListener("click",(e=>{const t=document.querySelector(".garage"),n=document.querySelector(".winners");t&&n&&(e.target===this.garageBtn?(this.garageBtn.classList.add("active"),this.winnersBtn.classList.remove("active"),t.classList.remove("hidden"),n.classList.add("hidden")):e.target===this.winnersBtn&&(this.winnersBtn.classList.add("active"),this.garageBtn.classList.remove("active"),t.classList.add("hidden"),n.classList.remove("hidden"),r.Winners.renderWinners()))}))}render(){return this.garageBtn.innerText="Garage",this.winnersBtn.innerText="Winners",this.element}}t.Navigation=a},73:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,a){function s(e){try{d(i.next(e))}catch(e){a(e)}}function o(e){try{d(i.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}d((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Pagination=void 0;const r=n(184),a=n(403),s=n(940),o=n(177),d=n(782);class c extends a.BaseComponent{constructor(e){super("div",["pagination-buttons"]),this.rootElement=e,this.rootElement.appendChild(this.element),this.prevBtn=document.createElement("button"),this.prevBtn.setAttribute("class","btn pagination-buttons__prev"),this.element.appendChild(this.prevBtn),this.nextBtn=document.createElement("button"),this.nextBtn.setAttribute("class","btn pagination-buttons__next"),this.element.appendChild(this.nextBtn),this.init()}render(){return this.prevBtn.innerText="Prev",this.nextBtn.innerText="Next",this.element}init(){this.element.addEventListener("click",(e=>i(this,void 0,void 0,(function*(){const t=yield r.getCars(o.variables.pageNum,s.CARS_ON_PAGE),n=Number(t.count);e.target===this.prevBtn&&o.variables.pageNum>s.FIRST_PAGE&&(o.variables.pageNum--,d.generateCarItems(o.variables.pageNum)),n&&n&&e.target===this.nextBtn&&o.variables.pageNum<=Math.floor(n/s.CARS_ON_PAGE)&&n>o.variables.pageNum*s.CARS_ON_PAGE&&(o.variables.pageNum++,d.generateCarItems(o.variables.pageNum))}))))}}t.Pagination=c},994:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WinnerItem=void 0;const i=n(403),r=n(634);class a extends i.BaseComponent{constructor(e){super("tr",["winners__item"]),this.rootElement=e,this.rootElement.appendChild(this.element),this.rowNum=document.createElement("td"),this.element.appendChild(this.rowNum),this.carView=document.createElement("td"),this.element.appendChild(this.carView),this.winnerName=document.createElement("td"),this.element.appendChild(this.winnerName),this.numOfWins=document.createElement("td"),this.element.appendChild(this.numOfWins),this.bestTime=document.createElement("td"),this.element.appendChild(this.bestTime)}render(e,t,n,i,a,s){return this.rowNum.innerHTML=`${n}`,this.carView.appendChild(new r.Car(this.carView).render(e,t)),this.winnerName.innerHTML=`${i}`,this.numOfWins.innerHTML=`${a}`,this.bestTime.innerHTML=`${s}`,this.element}}t.WinnerItem=a},287:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,a){function s(e){try{d(i.next(e))}catch(e){a(e)}}function o(e){try{d(i.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}d((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Winners=void 0;const r=n(303),a=n(403),s=n(940),o=n(177),d=n(994);class c extends a.BaseComponent{constructor(e){super("div",["winners","hidden"]),this.rootElement=e,this.rootElement.appendChild(this.element),c.title=document.createElement("h2"),this.element.appendChild(c.title),c.subTitle=document.createElement("h3"),this.element.appendChild(c.subTitle),this.table=document.createElement("table"),this.element.appendChild(this.table),this.thead=document.createElement("thead"),this.table.appendChild(this.thead),this.thNumber=document.createElement("th"),this.thead.appendChild(this.thNumber),this.thCar=document.createElement("th"),this.thead.appendChild(this.thCar),this.thName=document.createElement("th"),this.thead.appendChild(this.thName),c.thWins=document.createElement("th"),this.thead.appendChild(c.thWins),c.thTime=document.createElement("th"),this.thead.appendChild(c.thTime),c.tbody=document.createElement("tbody"),this.table.appendChild(c.tbody),this.pageButtons=document.createElement("div"),this.pageButtons.setAttribute("class","pagination-buttons"),this.element.appendChild(this.pageButtons),this.prevBtn=document.createElement("button"),this.prevBtn.setAttribute("class","btn pagination-buttons__prev"),this.pageButtons.appendChild(this.prevBtn),this.nextBtn=document.createElement("button"),this.nextBtn.setAttribute("class","btn pagination-buttons__next"),this.pageButtons.appendChild(this.nextBtn),this.init(),c.sortOrder()}render(){return this.thNumber.innerHTML="Number",this.thCar.innerHTML="Car",this.thName.innerHTML="Name",c.thWins.innerHTML=`Wins ${o.variables.arrowWin}`,c.thTime.innerHTML=`Best time (sec) ${o.variables.arrowTime}`,c.thWins.style.cursor="pointer",c.thTime.style.cursor="pointer",c.renderWinners(),this.prevBtn.innerText="Prev",this.nextBtn.innerText="Next",this.element}init(){this.element.addEventListener("click",(e=>i(this,void 0,void 0,(function*(){const t=yield r.getWinners({page:1,limit:10,sort:"time",order:"ADS"});if(t.count){const n=+t.count;e.target===this.prevBtn&&o.variables.winPageNum>s.FIRST_PAGE&&(o.variables.winPageNum--,c.renderWinners()),n&&e.target===this.nextBtn&&o.variables.winPageNum<=Math.floor(n/s.WINNERS_ON_PAGE)&&n>o.variables.winPageNum*s.WINNERS_ON_PAGE&&(o.variables.winPageNum++,c.renderWinners())}}))))}static sortOrder(){c.thWins.addEventListener("click",(()=>{o.variables.sort="wins","ASC"===o.variables.order?(o.variables.order="DESC",o.variables.arrowWin="▲",o.variables.arrowTime=""):(o.variables.order="ASC",o.variables.arrowWin="▼",o.variables.arrowTime=""),c.renderWinners()})),c.thTime.addEventListener("click",(()=>{o.variables.sort="time","ASC"===o.variables.order?(o.variables.order="DESC",o.variables.arrowTime="▲",o.variables.arrowWin=""):(o.variables.order="ASC",o.variables.arrowTime="▼",o.variables.arrowWin=""),c.renderWinners()}))}}t.Winners=c,c.renderWinners=()=>i(void 0,void 0,void 0,(function*(){const e=yield r.getWinners({page:o.variables.winPageNum,limit:10,sort:o.variables.sort,order:o.variables.order});c.title.innerHTML=`Winners (${e.count})`,c.subTitle.innerHTML=`Page #${o.variables.winPageNum}`;let t=1;c.tbody.innerHTML="",e.items.forEach((e=>{new d.WinnerItem(c.tbody).render(e.car.color,e.car.id,t,e.car.name,e.wins,e.time),t++})),c.thWins.innerHTML=`Wins ${o.variables.arrowWin}`,c.thTime.innerHTML=`Best time (sec) ${o.variables.arrowTime}`}))},161:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.carModels=void 0,t.carModels={Suzuki:["Grand Vitara","Jimny","Aerio","Alto","Cappuccino","Celerio","Dzire","Equator"],Lexus:["CT","ES","GS","GX","IS","LC","LS"],Kia:["Cadenza","Forte","Forte Koup","Forte5","K5","K900","Niro","Optima"],Subaru:["Ascent","BRZ","Crosstrek","Forester","Impreza","Legacy"],Mazda:["CX-3","CX-30","CX-5","CX-9","MAZDA3","MAZDA6"],Toyota:["4Runner","86","Avalon","C-HR","Camry"],Honda:["Accord","CR-V","CR-Z","Civic"],Mitsubishi:["Eclipse","Lancer","Mirage","Mirage G4","Outlander","i-MiEV"],Volvo:["S60","S80","S90","V60","V90","XC40","XC60","XC70","XC90"],Volkswagen:["Fox","Golf","Santana","Polo","Jetta","Passat","Phideon","Voyage","Tiguan","Touareg"],Ford:["Bronco Sport","C-MAX","EcoSport","Edge","Escape"],Chevrolet:["Blazer","Bolt EV","Camaro","City Express","Corvette"],Dodge:["Challenger","Charger","Dart","Durango","Journey","Viper"],Nissan:["370Z","Altima","Armada","GT-R"],Ferrari:["488 GTB","812 Superfast","California","FF","GTC4Lusso","Portofino"],Lamborghini:["Aventador","Huracan"],McLaren:["570GT","570S","650S","675LT","720S"],Maserati:["Ghibli","GranTurismo","Levante","Quattroporte"],Hyundai:["Accent","HB20","Santro","Aura","Celesta","Elantra","Lafesta","Mistra","Reina","Sonata"],Porsche:["718 Boxster","718 Cayman","911","Boxster","Cayenne","Cayman","Macan"],BMW:["2","3","4","5","6","7","8","M4","M5","X1","X3","X7","Z4","i3","i8"],Audi:["A5","A6","A7","A8","Q3","Q5","Q7","Q8","S5","S6","SQ5","TT","e-tron"],Jaguar:["E-PACE","F-TYPE","F-PACE","I-PACE","XE","XF","XJ"],Acura:["ILX","MDX","NSX","RDX","RLX","TLX"],Fiat:["124 Spider","500","500L","500X","500c","500e","500 Abarth","500c Abarth"],VAZ:["2101","2102","2103","2104","2105","2106","2107","2108"]}},205:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,a){function s(e){try{d(i.next(e))}catch(e){a(e)}}function o(e){try{d(i.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}d((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.createCar=t.createCarFn=void 0;const r=n(586);t.createCarFn=e=>i(void 0,void 0,void 0,(function*(){const t=yield fetch(`${r.baseUrl}${r.path.garage}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return yield t.json()})),t.createCar=(e,n)=>i(void 0,void 0,void 0,(function*(){yield t.createCarFn({name:e,color:n})}))},547:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,a){function s(e){try{d(i.next(e))}catch(e){a(e)}}function o(e){try{d(i.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}d((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.deleteCar=t.deleteCarFunc=void 0;const r=n(586),a=n(303);t.deleteCarFunc=e=>i(void 0,void 0,void 0,(function*(){const t=yield fetch(`${r.baseUrl}${r.path.garage}/${e}`,{method:"DELETE"});return yield t.json()})),t.deleteCar=e=>i(void 0,void 0,void 0,(function*(){yield t.deleteCarFunc(e),(yield a.getWinner(e)).id&&(yield a.deleteWinner(e))}))},184:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,a){function s(e){try{d(i.next(e))}catch(e){a(e)}}function o(e){try{d(i.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}d((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getCar=t.getCars=t.getCarFn=t.getCarsFn=void 0;const r=n(586);t.getCarsFn=e=>i(void 0,void 0,void 0,(function*(){const t=yield fetch(`${r.baseUrl}${r.path.garage}${(e=>e.length?`?${e.map((e=>`${e.key}=${e.value}`)).join("&")}`:"")(e)}`);return{items:yield t.json(),carNums:Number(t.headers.get("X-Total-Count"))}})),t.getCarFn=e=>i(void 0,void 0,void 0,(function*(){const t=yield fetch(`${r.baseUrl}${r.path.garage}/${e}`);return yield t.json()})),t.getCars=(e,t)=>i(void 0,void 0,void 0,(function*(){const n=yield fetch(`${r.baseUrl}${r.path.garage}?_page=${e}&_limit=${t}`);return{items:yield n.json(),count:n.headers.get("X-Total-Count")}})),t.getCar=e=>i(void 0,void 0,void 0,(function*(){return(yield fetch(`${r.baseUrl}${r.path.garage}/${e}`)).json()}))},743:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,a){function s(e){try{d(i.next(e))}catch(e){a(e)}}function o(e){try{d(i.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}d((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.updateCarColor=t.updateCarName=t.updateCar=t.updateCarParamFn=t.updateCarFn=void 0;const r=n(586);t.updateCarFn=(e,t)=>i(void 0,void 0,void 0,(function*(){const n=yield fetch(`${r.baseUrl}${r.path.garage}/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return yield n.json()})),t.updateCarParamFn=(e,t)=>i(void 0,void 0,void 0,(function*(){const n=yield fetch(`${r.baseUrl}${r.path.garage}/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return yield n.json()})),t.updateCar=(e,n,r)=>i(void 0,void 0,void 0,(function*(){yield t.updateCarParamFn(e,{name:n,color:r})})),t.updateCarName=(e,n)=>i(void 0,void 0,void 0,(function*(){yield t.updateCarParamFn(e,{name:n})})),t.updateCarColor=(e,n)=>i(void 0,void 0,void 0,(function*(){yield t.updateCarParamFn(e,{color:n})}))},586:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.path=t.baseUrl=void 0,t.baseUrl="http://127.0.0.1:3000",t.path={garage:"/garage",winners:"/winners",engine:"/engine"}},303:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,a){function s(e){try{d(i.next(e))}catch(e){a(e)}}function o(e){try{d(i.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}d((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getWinners=t.getSortOrder=t.saveWinner=t.updateWinner=t.createWinner=t.deleteWinner=t.getWinnerStatus=t.getWinner=void 0;const r=n(940),a=n(184),s=n(586);t.getWinner=e=>i(void 0,void 0,void 0,(function*(){return(yield fetch(`${s.baseUrl}${s.path.winners}/${e}`)).json()})),t.getWinnerStatus=e=>i(void 0,void 0,void 0,(function*(){return(yield fetch(`${s.baseUrl}${s.path.winners}/${e}`)).status})),t.deleteWinner=e=>i(void 0,void 0,void 0,(function*(){return(yield fetch(`${s.baseUrl}${s.path.winners}/${e}`,{method:"DELETE"})).json()})),t.createWinner=e=>i(void 0,void 0,void 0,(function*(){return(yield fetch(`${s.baseUrl}${s.path.winners}`,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}})).json()})),t.updateWinner=(e,t)=>i(void 0,void 0,void 0,(function*(){return(yield fetch(`${s.baseUrl}${s.path.winners}/${e}`,{method:"PUT",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})).json()})),t.saveWinner=({id:e,time:n})=>i(void 0,void 0,void 0,(function*(){if((yield t.getWinnerStatus(e))===r.ERR_404)yield t.createWinner({id:e,wins:1,time:n});else{const i=yield t.getWinner(e);yield t.updateWinner(e,{id:e,wins:i.wins+r.ONE,time:n<i.time?n:i.time})}})),t.getSortOrder=(e,t)=>e&&t?`&_sort=${e}&_order=${t}`:"",t.getWinners=({page:e,limit:n=r.WINNERS_ON_PAGE,sort:o,order:d})=>i(void 0,void 0,void 0,(function*(){const r=yield fetch(`${s.baseUrl}${s.path.winners}?_page=${e}&_limit=${n}${t.getSortOrder(o,d)}`),c=yield r.json();return{items:yield Promise.all(c.map((e=>i(void 0,void 0,void 0,(function*(){return Object.assign(Object.assign({},e),{car:yield a.getCar(e.id)})}))))),count:r.headers.get("X-Total-Count")}}))}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var a=t[i]={exports:{}};return e[i].call(a.exports,a,a.exports,n),a.exports}n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{const e=n(295),t=n(925);n(387),window.onload=()=>{const n=document.getElementById("app");if(!n)throw Error("App root element not found");new t.Navigation(n).render(),new e.Main(n).render()}})()})();